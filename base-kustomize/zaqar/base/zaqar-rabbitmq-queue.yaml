---
apiVersion: rabbitmq.com/v1beta1
kind: User
metadata:
  name: zaqar
  namespace: openstack
  labels:
    app.kubernetes.io/managed-by: "Helm"
  annotations:
    helm.sh/resource-policy: keep
    meta.helm.sh/release-name: "zaqar"
    meta.helm.sh/release-namespace: "openstack"
spec:
  tags:
    - management
    - policymaker
  rabbitmqClusterReference:
    name: rabbitmq
    namespace: openstack
  importCredentialsSecret:
    name: zaqar-rabbitmq-password
---
apiVersion: rabbitmq.com/v1beta1
kind: Vhost
metadata:
  name: zaqar-vhost
  namespace: openstack
  labels:
    app.kubernetes.io/managed-by: "Helm"
  annotations:
    helm.sh/resource-policy: keep
    meta.helm.sh/release-name: "zaqar"
    meta.helm.sh/release-namespace: "openstack"
spec:
  name: "zaqar"
  defaultQueueType: quorum
  rabbitmqClusterReference:
    name: rabbitmq
    namespace: openstack
---
apiVersion: rabbitmq.com/v1beta1
kind: Queue
metadata:
  name: zaqar-queue
  namespace: openstack
  labels:
    app.kubernetes.io/managed-by: "Helm"
  annotations:
    helm.sh/resource-policy: keep
    meta.helm.sh/release-name: "zaqar"
    meta.helm.sh/release-namespace: "openstack"
spec:
  name: zaqar-qq
  vhost: "zaqar"
  type: quorum
  autoDelete: false
  durable: true
  rabbitmqClusterReference:
    name: rabbitmq
    namespace: openstack
---
apiVersion: rabbitmq.com/v1beta1
kind: Permission
metadata:
  name: zaqar-permission
  namespace: openstack
  labels:
    app.kubernetes.io/managed-by: "Helm"
  annotations:
    helm.sh/resource-policy: keep
    meta.helm.sh/release-name: "zaqar"
    meta.helm.sh/release-namespace: "openstack"
spec:
  vhost: "zaqar"
  userReference:
    name: "zaqar"
  permissions:
    write: ".*"
    configure: ".*"
    read: ".*"
  rabbitmqClusterReference:
    name: rabbitmq
    namespace: openstack

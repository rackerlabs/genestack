---
images:
  tags:
    db_drop: "ghcr.io/rackerlabs/genestack-images/heat:2024.1-latest"
    db_init: "ghcr.io/rackerlabs/genestack-images/heat:2024.1-latest"
    dep_check: "ghcr.io/rackerlabs/genestack-images/kubernetes-entrypoint:latest"
    image_repo_sync: null
    ks_endpoints: "ghcr.io/rackerlabs/genestack-images/heat:2024.1-latest"
    ks_service: "ghcr.io/rackerlabs/genestack-images/heat:2024.1-latest"
    ks_user: "ghcr.io/rackerlabs/genestack-images/heat:2024.1-latest"
    placement: "ghcr.io/rackerlabs/genestack-images/placement:2024.1-latest"
    placement_db_sync: "ghcr.io/rackerlabs/genestack-images/placement:2024.1-latest"

# NOTE: (brew) requests cpu/mem values based on a three node
# hyperconverged lab (/scripts/hyperconverged-lab.sh).
# limit values based on defaults from the openstack-helm charts unless defined
pod:
  lifecycle:
    upgrades:
      deployments:
        revision_history: 3
        pod_replacement_strategy: RollingUpdate
        rolling_update:
          max_unavailable: 20%
          max_surge: 3
    disruption_budget:
      api:
        min_available: 0
    termination_grace_period:
      api:
        timeout: 60
  resources:
    enabled: true
    api:
      requests:
        memory: "256Mi"
        cpu: "300m"
      limits: {}

conf:
  logging:
    logger_root:
      handlers:
        - stdout
      level: INFO
  placement:
    keystone_authtoken:
      auth_type: password
      auth_version: v3
      memcache_security_strategy: ENCRYPT
      service_token_roles: service
      service_token_roles_required: true
      service_type: placement
    oslo_concurrency:
      lock_path: /tmp/placement
    placement:
      randomize_allocation_candidates: true
    placement_database:
      connection_debug: 0
      connection_recycle_time: 600
      connection_trace: true
      idle_timeout: 3600
      mysql_sql_mode: {}
      use_db_reconnect: true
      pool_timeout: 60
      max_retries: -1
  placement_api_uwsgi:
    uwsgi:
      processes: 2
      threads: 1

endpoints:
  fluentd:
    namespace: fluentbit
  identity:
    port:
      api:
        default: 5000
        internal: 5000
        public: 80
        service: 5000
  oslo_db:
    host_fqdn_override:
      default: mariadb-cluster-primary.openstack.svc.cluster.local
    hosts:
      default: mariadb-cluster-primary
  oslo_cache:
    host_fqdn_override:
      default: memcached.openstack.svc.cluster.local
    hosts:
      default: memcached

dependencies:
  static:
    db_sync:
      jobs: []

manifests:
  ingress: false
  job_db_init: false
  secret_ingress_tls: false
  service_ingress: false
